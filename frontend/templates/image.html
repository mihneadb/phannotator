{% extends 'site_base.html' %}
{% load static %}

{%  block script %}
<script src="{%  static 'js/annotate.js' %}"></script>
{%  endblock %}

{% block content %}
    <canvas id="img-viewer" data-img-src="{{ imgurl }}" data-img-pk="{{ imgpk }}"></canvas>

    <div class="panel text-center hide" id="annotation-add-div">
        <div class="small-9 columns">
            <input type="text" placeholder="Annotation name.." id="annotation-add-input"/>
        </div>
        <div class="small-3 columns">
            <button class="small" id="annotation-add-btn">Set</button>
        </div>
    </div>

    <div class="row" id="comments">
        <h2 id="current-annotation">Annotation name</h2>

        {%  for comment in comments %}
        <div class="comment">
            <p>{{ comment.text }}</p>
            <p>by {{ comment.author }}</p>
        </div>
        {% endfor %}

        <div class="add-comment-div">
            <form action="{% url 'add_comment' imgpk %}" method="post">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <input type="submit" value="Add comment" />
            </form>
        </div>

    </div>

{% endblock %}
